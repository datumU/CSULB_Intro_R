---
title: Subsetting
subtitle: CSULB Intro to R
date: April 13, 2018
#author: Chris Galbraith, Micah Jackson
output: slidy_presentation
smaller: yes
---

## Subsetting

+ Sometimes, we want to take a subset of a vector, matrix, list, or data frame
+ Three main operators to take a subset of an object:
1.  ```[]``` single brackets return an object of the same class of the original object (typically vectors, matrices)
2. ```[[]]``` double brackets are used to subset lists and dataframes by an (numeric) index
3. ```$``` used to subset lists and dataframes by their **name** attributes
+ ```[]``` allows us to select more than one element 
+ ```[[]]``` and ```$``` allow us to select only one (though this *one* may be a structure with multiple elements) 


## Subsetting Examples

```{r echo=TRUE}
myVec <- 1:10
myVec[3]

myList <- list(obj1 = "a", obj2 = 10, obj3 = T)
myList[[3]]
myList$obj3
```


## Subsetting with ```[]```

By using single brackets, we can choose more than one element of an object
```{r echo=TRUE}
x <- seq(from=0, to=100, by=10) 
x
x[1]  # select the first element
x[10]  # select the 10th element
x[1:3]  # select the first, second, and third elements
```


## Subsetting with ```[]``` -  Index Vectors

+ Another way to select more than one element from an object is by using index vectors
+ An index vector is a vector of indices that is used to select a subset of another vector (or matrix)

```{r echo=TRUE}
x <- seq(from=0, to=100,by=10) 
x
x[c(2,4,6)]  # select the second, fourth, and six elements
IndVec <- c(1, 2, 3, 4, 5)       # index vector to select the first 5 elements 
x[IndVec]
```


## Index Vectors

There are four types of index vectors:

1. Logical index vector
2. Vector of positive integers
3. Vector of negative integers
4. Vector of character strings


## Example

+ Suppose we have grades of ten students

```{r echo=TRUE}
grades <- sample(0:100, 10)  # randomly choose 10 numbers between 0 and 100
attributes(grades)
names(grades) <- letters[1:10]
attributes(grades)
grades
```

+ We will explore the different ways to subset this vector using index vectors


## 1. Index Vector of Positive Integers

+ A vector of positive integers corresponding to the elements you want to subset
+ All of the values in this type of index vector must lie in ```1:(length(x))```
```{r echo=TRUE}
posIndVec <- 4:7
posIndVec

grades[posIndVec]
```


## 2. Index Vector of Negative Integers

A vector of negative integers indicates the values to be **excluded** from the vector
```{r echo=TRUE}
negIndVec <- -1:-5
negIndVec

grades[negIndVec]
```


## 3. Vector of Character Strings

If a vector has a name attribute, we can take a subset of the vector by calling the names of the elements
```{r echo=TRUE}
chIndVec <- c("a")
chIndVec

grades[chIndVec]
```


## 4. Logical Index Vector

+ A vector of TRUE/FALSE values that should be the same length as the vector from which we are subsetting. 
+ Values corresponding to TRUE in the index vector are selected

```{r echo=TRUE}
logIndVec <- rep(c(T, F), each = 5)
logIndVec

grades[logIndVec]
```


## 4. Logical Index Vector

Logical index vectors can also be generated by using conditional statements and operators including ```==```, ```!=```, ```<```, and ```>```

```{r echo=TRUE}
logIndVec <- grades > 60
logIndVec

grades[logIndVec]
grades[grades < 40]
```


## Subsetting Matrices

+ We also use the single square brackets to subset matrices
+ In the square brackets, the first position refers to the row(s) and the second position refers to the column(s)
```{r echo=TRUE}
myMat <- matrix(1:8, ncol = 4)
myMat
```

+ Let's go over the various ways to subset this matrix


## Subsetting Matrices

```{r echo=TRUE}
myMat[1,1]            # retrieve the element in the first row, first column
myMat[2,]             # retrieve the second row
myMat[,-3]             # remove the third column
```  


## Subsetting Matrices

By default, when the retrieved elements of a matrix look like a vector, R drops their dimension attribute. We can turn this feature off by setting ```drop = FALSE```

```{r echo=TRUE}
myMat[1,1]
myMat[1,1, drop = FALSE]

myMat[2,]
myMat[2,, drop = FALSE]
``` 


## Subsetting Lists

```{r echo=TRUE}
myList <- list(ID = paste("ID", sample(c(100:199), 3), sep = ""), 
               Age = sample(c(18:99), 3), 
               Sex = sample(c("M", "F"), 3, replace = TRUE))
myList
myList[1]  # subset is still a list
``` 


## Subsetting Lists

```{r echo=TRUE}
myList[1:2]  # return the first two objects; subset is still a list
myList[[1]]  # return the 1st object; subset is a character vector
myList$ID  # alternative to [[]]
``` 


## Subsetting Lists

```{r echo=TRUE}
myList[[1]][2] # return the 2nd element of the 1st object
myList$ID[2]
myList[[c(1,2)]]
``` 


## Subsetting Data Frames

```{r echo=TRUE}
studentID <- paste("S#", sample(c(6473:7392), 10), sep = "")
score <- sample(c(0:100), 10)
sex <- sample(c("female", "male"), 10, replace = TRUE)
data <- data.frame(studentID = studentID, score = score, sex = sex)
str(data)
data
``` 


## Subsetting Data Frames

```{r echo=TRUE}
data[1:8,]
``` 


## Subsetting Data Frames 

```{r echo=TRUE}
head(data$sex)
head(data[,c("studentID", "score")])
```


## Up Next

+ Exercise 3
+ Break
